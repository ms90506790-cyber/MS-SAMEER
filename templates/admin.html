{% extends "base.html" %}
{% block content %}
  <h2>Admin Panel</h2>
  <div class="grid">
    <div class="card">
      <h3>Upload Material</h3>
      <form method="POST" enctype="multipart/form-data">
        <label>Select subject</label>
        <select name="subject">
          {% for s in subjects %}
            <option value="{{ s }}">{{ s }}</option>
          {% endfor %}
        </select>
        <input type="file" name="file" required>
        <button class="btn" type="submit">Upload</button>
      </form>
    </div>

    <div class="card">
      <h3>Existing Files</h3>
      {% for subject, files in files_by_subject.items() %}
        <h4>{{ subject }}</h4>
        <ul class="file-list">
          {% for f in files %}
            <li>
              {{ f }}
              <form class="inline" method="POST" action="{{ url_for('admin_delete', subject=subject, filename=f) }}">
                <button class="btn small danger" type="submit">Delete</button>
              </form>
            </li>
          {% else %}
            <li class="muted">No files</li>
          {% endfor %}
        </ul>
      {% endfor %}
    </div>
  </div>
{% endblock %}